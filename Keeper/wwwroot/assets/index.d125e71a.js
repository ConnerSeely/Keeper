var te=Object.defineProperty;var j=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var D=(a,e,t)=>e in a?te(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,P=(a,e)=>{for(var t in e||(e={}))ae.call(e,t)&&D(a,t,e[t]);if(j)for(var t of j(e))oe.call(e,t)&&D(a,t,e[t]);return a};import{r as se,c as h,a as b,o as d,b as u,d as s,e as y,F as R,f as ne,S as B,u as O,t as f,w as re,g as U,h as z,M as $,i as k,v as S,p as w,j as x,k as ie,l as M,m as q,n as H,q as ce,s as le,x as de,y as ue,z as _e,A as F,B as pe,C as me}from"./vendor.fb538464.js";const ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}};ge();const i=se({user:{},account:{},keeps:[],activeKeep:{},activeVault:{},activeProfile:{},vaults:[],userVaults:[],myVaults:[],userKeeps:[]});var v=(a,e)=>{for(const[t,o]of e)a[t]=o;return a};const ve={name:"App",setup(){return{appState:h(()=>i)}}};function he(a,e,t,o,r,c){const n=b("Navbar"),l=b("router-view"),K=b("KeepModal");return d(),u(R,null,[s("header",null,[y(n)]),s("main",null,[y(l),y(K)])],64)}var fe=v(ve,[["render",he]]);const Y=window.location.origin.includes("localhost"),W=Y?"https://localhost:5001":"",be="dev-m167f2s3.us.auth0.com",ye="jRzLXhUFCTXOuuYsKq30uRrhPkWZrkoi",ke="http://ConnerDev.com",p=ne.create({baseURL:W,timeout:8e3});function V(a,e){if(Y)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){V("log",arguments)},error(){V("error",arguments)},warn(){V("warn",arguments)},assert(){V("assert",arguments)},trace(){V("trace",arguments)}};class we{async getAll(){const e=await p.get("api/keeps");i.keeps=e.data}async getProfileKeeps(e){const t=await p.get("api/profiles/"+e+"/keeps");i.userKeeps=t.data}async addKeep(e){await p.post("api/vaultkeeps",e)}async getVaultKeeps(e){const t=await p.get("api/vaults/"+e+"/keeps");i.keeps=t.data}async setActive(e){e.views++,i.activeKeep=e,await p.get(`api/keeps/${e.id}`)}async createKeep(e){const t=await p.post("api/keeps",e);return _.log("created keep",t.data),i.userKeeps.push(t.data),i.keeps.push(t.data),t.data}async deleteKeep(e){const t=await p.delete("api/keeps/"+e);_.log("deleting keep",t.data),i.keeps=i.keeps.filter(o=>o.id!=e)}}const C=new we;class g{static async confirm(e="Are you sure?",t="You won't be able to revert this!",o="warning",r="Yes, delete it!"){try{return!!(await B.fire({title:e,text:t,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",o="top-end",r=3e3,c=!0){B.fire({title:e,icon:t,position:o,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var t;if(e.isAxiosError){const{response:o}=e;this.toast(((t=o.data.error)==null?void 0:t.message)||o.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const xe={props:{keep:{type:Object,required:!0}},setup(a){const e=O();return{profile:h(()=>i.account),async setActive(){try{C.setActive(a.keep)}catch(t){g.toast("Something went wrong","error"),_.error(t)}},goToProfile(){e.push({name:"Profile",params:{id:a.keep.creatorId}})}}}},$e={class:""},Se=["src"],Ve={class:"d-flex info p-2 text-light"},Ce={class:""},Ke=["src"];function Te(a,e,t,o,r,c){return d(),u("div",{"data-bs-target":"#keep-modal","data-bs-toggle":"modal",class:"m-4 elevation-2 d-flex justify-content-between selectable",onClick:e[1]||(e[1]=(...n)=>o.setActive&&o.setActive(...n))},[s("div",$e,[s("img",{class:"img-fluid",src:t.keep.img},null,8,Se),s("div",Ve,[s("h3",Ce,f(t.keep.name),1),s("img",{class:"profile-img rounded-pill m-2",src:t.keep.creator.picture,alt:"",onClick:e[0]||(e[0]=re((...n)=>o.goToProfile&&o.goToProfile(...n),["stop"]))},null,8,Ke)])])])}var Ae=v(xe,[["render",Te],["__scopeId","data-v-c0cb429e"]]),Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ae});const Ie={props:{keep:{type:Object,required:!1}},setup(a){const e=U({});return z(()=>{e.value=P({},a.keep)}),{props:a,editable:e,async createKeep(){try{const t=await C.createKeep(e.value);g.toast("Keep Created!"),$.getOrCreateInstance(document.getElementById("create-keep")).hide()}catch(t){g.error(t)}},async editKeep(){try{await C.editKeep(e.value),g.toast("Keep updated!"),$.getOrCreateInstance(document.getElementById("edit-keep")).hide()}catch(t){g.error(t)}}}}},T=a=>(w("data-v-720f92c4"),a=a(),x(),a),Pe={id:"vault-form"},Oe=T(()=>s("label",null,"Keep Name",-1)),Me=T(()=>s("label",null,"Description",-1)),qe=T(()=>s("label",null,"Image",-1)),Ne=T(()=>s("button",{type:"button","data-bs-dismiss":"modal"},"cancel",-1));function Le(a,e,t,o,r,c){return d(),u("form",Pe,[Oe,k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.editable.name=n),type:"text","aria-describedby":"helpId",required:""},null,512),[[S,o.editable.name]]),Me,k(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.editable.description=n),type:"text","aria-describedby":"helpId",required:""},null,512),[[S,o.editable.description]]),qe,k(s("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>o.editable.img=n),type:"text","aria-describedby":"helpId",required:""},null,512),[[S,o.editable.img]]),Ne,t.keep?(d(),u("button",{key:1,type:"button",onClick:e[4]||(e[4]=(...n)=>o.editKeep&&o.editKeep(...n))},"Save!")):(d(),u("button",{key:0,type:"button",onClick:e[3]||(e[3]=(...n)=>o.createKeep&&o.createKeep(...n))},"Create!"))])}var je=v(Ie,[["render",Le],["__scopeId","data-v-720f92c4"]]),De=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:je});const Re={setup(){return{keep:h(()=>i.activeKeep),account:h(()=>i.account),vaults:h(()=>i.myVaults),async addKeep(a){_.log("adding keep",a);try{const e={vaultId:a,keepId:i.activeKeep.id};await C.addKeep(e)}catch(e){g.toast("hmm wrong","error"),_.log(e)}},async deleteKeep(){try{await C.deleteKeep(i.activeKeep.id),$.getOrCreateInstance(document.getElementById("keep-modal")).hide()}catch(a){g.toast("hmm wrong","error"),_.log(a)}}}}},G=a=>(w("data-v-0e924729"),a=a(),x(),a),Be={class:"container"},Ue={class:"row"},ze={class:"col-md-6"},He=["src"],Fe={class:"col-md-6"},Ye={class:"ms-4 d-flex flex-column justify-content-center"},We={class:"mdi mdi-account-eye text-center"},Ge={class:"mdi mdi-safe-square-outline text-center"},Xe={class:"pb-2 text-center"},Qe=G(()=>s("br",null,null,-1)),Ze={class:"pb-4 border-bottom border-secondary"},Je={class:"dropdown open"},et=G(()=>s("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"triggerId","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Add to Vault ",-1)),tt={class:"dropdown-menu","aria-labelledby":"triggerId"},at=["value","onClick"],ot=["src"];function st(a,e,t,o,r,c){const n=b("Modal");return d(),ie(n,{id:"keep-modal"},{"modal-body":M(()=>[s("div",Be,[s("div",Ue,[s("div",ze,[s("img",{class:"img-fluid keep-img",src:o.keep.img},null,8,He)]),s("div",Fe,[s("div",Ye,[s("i",We,[q(f(o.keep.views)+" ",1),s("i",Ge,f(o.keep.kept),1)]),s("h1",Xe,[q(f(o.keep.name)+" ",1),Qe]),s("h6",Ze,f(o.keep.description),1),s("div",null,[o.keep.creatorId==o.account.id?(d(),u("i",{key:0,class:"mdi mdi-delete text-danger",onClick:e[0]||(e[0]=(...l)=>o.deleteKeep&&o.deleteKeep(...l))})):H("",!0),s("div",Je,[et,s("div",tt,[(d(!0),u(R,null,ce(o.vaults,l=>(d(),u("a",{class:"dropdown-item",href:"#",key:l.id,value:l==null?void 0:l.name,onClick:K=>o.addKeep(l.id)},f(l==null?void 0:l.name),9,at))),128))])]),s("img",{class:"profile-img rounded-pill",src:o.keep,alt:""},null,8,ot)])])])])])]),_:1})}var nt=v(Re,[["render",st],["__scopeId","data-v-0e924729"]]),rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:nt});const it="modulepreload",X={},ct="/",A=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${ct}${o}`,o in X)return;X[o]=!0;const r=o.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":it,r||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),r)return new Promise((l,K)=>{n.addEventListener("load",l),n.addEventListener("error",K)})})).then(()=>e())};function lt(a){switch(a){case"./pages/AccountPage.vue":return A(()=>import("./AccountPage.d6b6d664.js"),["assets/AccountPage.d6b6d664.js","assets/AccountPage.35560bf1.css","assets/vendor.fb538464.js"]);case"./pages/HomePage.vue":return A(()=>import("./HomePage.6b39064d.js"),["assets/HomePage.6b39064d.js","assets/HomePage.b1acec75.css","assets/vendor.fb538464.js"]);case"./pages/ProfilePage.vue":return A(()=>import("./ProfilePage.7fa5e8fd.js"),["assets/ProfilePage.7fa5e8fd.js","assets/ProfilePage.c69cadb4.css","assets/vendor.fb538464.js"]);case"./pages/VaultPage.vue":return A(()=>import("./VaultPage.d0aa3030.js"),["assets/VaultPage.d0aa3030.js","assets/VaultPage.31fb5590.css","assets/vendor.fb538464.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function E(a){return()=>lt(`./pages/${a}.vue`)}const dt=[{path:"/",name:"Home",component:E("HomePage")},{path:"/profiles/:id",name:"Profile",component:E("ProfilePage")},{path:"/vaults/:id/keeps",name:"Vault",component:E("VaultPage")},{path:"/account",name:"Account",component:E("AccountPage"),beforeEnter:ue}],Q=le({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:de(),routes:dt});class ut{async getAccount(){try{const e=await p.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const _t=new ut,pt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class mt{constructor(e=!1,t=W){}on(e,t){var o;return(o=this.socket)==null||o.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(pt.authenticate,e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class gt extends mt{constructor(){super();this.on("error",this.onError)}onError(e){g.toast(e.message,"error")}}const Z=new gt;class vt{async getAll(e){const t=await p.get("api/profiles/"+e+"/vaults");_.log(t.data),i.userVaults=t.data}async getMy(e){const t=await p.get("api/profiles/"+e+"/vaults");_.log(t.data,"my vcaults"),i.myVaults=t.data}async getVaultById(e){const t=await p.get("api/vaults/"+e);_.log(t.data),i.activeVault=t.data}async createVault(e){const t=await p.post("api/vaults",e);return _.log("created vault",t.data),i.userVaults.push(t.data),i.vaults.push(t.data),t.data}async deleteVault(e){const t=await p.delete("api/vaults/"+e);_.log("deleting vault",t.data),i.vaults=i.vaults.filter(o=>o.id!=e)}}const N=new vt,m=_e({domain:be,clientId:ye,audience:ke,useRefreshTokens:!0,onRedirectCallback:a=>{Q.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});m.on(m.AUTH_EVENTS.AUTHENTICATED,async function(){p.defaults.headers.authorization=m.bearer,p.interceptors.request.use(ht),i.user=m.user,await _t.getAccount(),Z.authenticate(m.bearer),await N.getMy(i.account.id)});async function ht(a){if(!m.isAuthenticated)return a;const e=m.identity.exp*1e3,t=e<Date.now(),o=e<Date.now()+1e3*60*60*12;return t?await m.loginWithPopup():o&&(await m.getTokenSilently(),p.defaults.headers.authorization=m.bearer,Z.authenticate(m.bearer)),a}const ft={setup(){return{user:h(()=>i.user),account:h(()=>i.account),async login(){m.loginWithPopup()},async logout(){m.logout({returnTo:window.location.origin})}}}},J=a=>(w("data-v-f7b5cf20"),a=a(),x(),a),bt={class:"navbar-text"},yt={key:1,class:"dropdown my-2 my-lg-0"},kt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},wt={key:0},xt=["src"],$t={class:"mx-3 text-success lighten-30"},St={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Vt=J(()=>s("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Ct=J(()=>s("i",{class:"mdi mdi-logout"},null,-1)),Kt=q(" logout "),Tt=[Ct,Kt];function At(a,e,t,o,r,c){const n=b("router-link");return d(),u("span",bt,[o.user.isAuthenticated?(d(),u("div",yt,[s("div",kt,[o.account.picture?(d(),u("div",wt,[s("img",{src:o.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,xt),s("span",$t,f(o.account.name),1)])):H("",!0)]),s("div",St,[y(n,{to:{name:"Account"}},{default:M(()=>[Vt]),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...l)=>o.logout&&o.logout(...l))},Tt)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...l)=>o.login&&o.login(...l))}," Login "))])}var Et=v(ft,[["render",At],["__scopeId","data-v-f7b5cf20"]]),It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Et});const Pt={},Ot={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},Mt={class:"modal-dialog modal-lg",role:"document"},qt={class:"modal-content"},Nt={class:"modal-header"},Lt=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1);function jt(a,e,t,o,r,c){return d(),u("div",Ot,[s("div",Mt,[s("div",qt,[s("div",Nt,[F(a.$slots,"header",{class:"modal-title"}),Lt]),F(a.$slots,"modal-body",{class:"modal-body"})])])])}var Dt=v(Pt,[["render",jt]]),Rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Dt});const Bt={setup(){return{}}},L=a=>(w("data-v-254112a0"),a=a(),x(),a),Ut={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},zt=L(()=>s("div",{class:"d-flex flex-column align-items-center"},[s("h1",null,"Keeper")],-1)),Ht=L(()=>s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1)),Ft={class:"collapse navbar-collapse",id:"navbarText"},Yt=L(()=>s("ul",{class:"navbar-nav me-auto"},[s("li")],-1));function Wt(a,e,t,o,r,c){const n=b("router-link"),l=b("Login");return d(),u("nav",Ut,[y(n,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:M(()=>[zt]),_:1}),Ht,s("div",Ft,[Yt,y(l)])])}var Gt=v(Bt,[["render",Wt],["__scopeId","data-v-254112a0"]]),Xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gt});const Qt={props:{vault:{type:Object,required:!0}},setup(a){const e=O();return{profile:h(()=>i.account),goToVault(){e.push({name:"Vault",params:{id:a.vault.id}})}}}},Zt=a=>(w("data-v-6c1d8680"),a=a(),x(),a),Jt=Zt(()=>s("img",{class:"img-fluid",src:"https://thiscatdoesnotexist.com"},null,-1)),ea={class:"info p-2 text-light"},ta={class:""};function aa(a,e,t,o,r,c){return d(),u("div",{class:"vault d-flex m-4 elevation-2 selectable",onClick:e[0]||(e[0]=(...n)=>o.goToVault&&o.goToVault(...n))},[Jt,s("div",ea,[s("h3",ta,f(t.vault.name),1)])])}var oa=v(Qt,[["render",aa],["__scopeId","data-v-6c1d8680"]]),sa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oa});const na={props:{vault:{type:Object,required:!1}},setup(a){const e=U({});return O(),z(()=>{e.value=P({},a.vault)}),{props:a,editable:e,async createVault(){try{const t=await N.createVault(e.value);g.toast("Vault Created!"),$.getOrCreateInstance(document.getElementById("create-vault")).hide()}catch(t){g.error(t)}},async editVault(){try{await N.editVault(e.value),g.toast("Vault updated!"),$.getOrCreateInstance(document.getElementById("edit-vault")).hide()}catch(t){g.error(t)}}}}},I=a=>(w("data-v-d0ba9c76"),a=a(),x(),a),ra={id:"vault-form"},ia=I(()=>s("label",null,"Vault Name",-1)),ca=I(()=>s("label",null,"Description",-1)),la=I(()=>s("label",null,"Private",-1)),da=I(()=>s("button",{type:"button","data-bs-dismiss":"modal"},"cancel",-1));function ua(a,e,t,o,r,c){return d(),u("form",ra,[ia,k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.editable.name=n),type:"text","aria-describedby":"helpId",required:""},null,512),[[S,o.editable.name]]),ca,k(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.editable.description=n),type:"text","aria-describedby":"helpId",required:""},null,512),[[S,o.editable.description]]),la,k(s("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>o.editable.isPrivate=n),type:"checkbox","aria-describedby":"helpId",required:""},null,512),[[pe,o.editable.isPrivate]]),da,t.vault?(d(),u("button",{key:1,type:"button",onClick:e[4]||(e[4]=(...n)=>o.editVault&&o.editVault(...n))},"Save!")):(d(),u("button",{key:0,type:"button",onClick:e[3]||(e[3]=(...n)=>o.createVault&&o.createVault(...n))},"Create!"))])}var _a=v(na,[["render",ua],["__scopeId","data-v-d0ba9c76"]]),pa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_a});function ma(a){Object.entries({"./components/Keep.vue":Ee,"./components/KeepForm.vue":De,"./components/KeepModal.vue":rt,"./components/Login.vue":It,"./components/Modal.vue":Rt,"./components/Navbar.vue":Xt,"./components/Vault.vue":sa,"./components/VaultForm.vue":pa}).forEach(([t,o])=>{const r=o.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,o.default)})}const ee=me(fe);ma(ee);ee.use(Q).mount("#app");export{i as A,g as P,v as _,p as a,C as k,_ as l,N as v};
